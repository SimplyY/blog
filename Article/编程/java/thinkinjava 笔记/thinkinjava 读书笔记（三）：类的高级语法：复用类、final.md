# thinkinjava读书笔记（三）：类的高级语法：复用类、final
## 复用类
### 实现代码复用的方式
1. 组合（has a）：在新的类中产生现有的类
2. 继承（is a）：按照现有类的类型来创建新类

### 组合和继承中选择
1. 组合既是通常用于想在新类中**使用现有类的功能**而非它的接口。将对象嵌入新类中来实现组合。
2. 于是新类的用户看到的只是为新类定义的接口，而非嵌入对象的接口，达到了封装的效果.
    - 组合很像**adpter设计模式**。不过组合不仅能实现接口的转换，还能使用嵌入对象的属性。
    - 嵌入对象最好用private，以达到封装的效果。
    - 向上转型语法
        1. 向上转型就好比，猫（类）是动物（类），（is a）可以自动进行（无需强制类型转换）。
        2. 在将实参（调用时传入的参数）传入方法而导致的自动调用的向上转型，即是**多态的重要的体现之处**，这类似于**策略设计模式**。举个例子，动物都会move，对于猫move是walk，而对于鸟是fly
    - 向下转型需要强制类型转换。


### 重载
- 子类是可以**重载**父类的方法的，所以为了避免弄混淆重载和重写，所以重写一定要加上＠Override

> ＠Override可以防止你在不想重载的时候（重写的时候）而意外的进行了重载

### 重写
- 协变返回类型。
	- *子类的重写方法的返回值*，可以是*父类的被重写方法的返回值*的子类。


### **继承里的初始化顺序**（极易错）
- **顺序**：**当父类初始化完全完成**，再进行子类的初始化。

> 误区：super（x）不是在**编译时**调用的，也就是说**不是在子类构造函数里调用父类构造函数，即便super（x）在子类构造函数里**，而是在编译前就已经通过super（x）中的x的类型确定了会调用哪个父类构造函数，因此能在子类初始化之前将父类构造函数调用。

### 方法的调用绑定（**多态的基石**）
- 将一个**方法调用**和一个**方法主体***关联*起来。
- 前期绑定
	- 面向过程语言所有方法都是前期绑定，它是在程序执行前就已经绑定。
	- 前期绑定只有在方法调用和方法主体的关联方式只有一种的时候才能存在
	- 所以面向对象中，只有final方法或者private方法会被前期绑定，因为它们的**关联方式**只可能有一种，所以所有不能被重写的方法都是前期绑定。
- 后期绑定（动态绑定，也叫做动态连编）
	- 除了final方法和private方法，其他方法都是后期绑定。因为其他方法可以被重写
	- 由于方法可能会被重写，所以方法的调用和主体的关联是**不确定的**，由调用方法的对象的类型决定，这样才会产生多态的语法，这是**多态的基石**。

## final语法
- 用于变量
	- final的作用是**使引用恒定不变**
		- 对于对象的引用，对象本身可以修改但是此引用不能指向其他对象。
		- 对于基本类型，则为常量。
	- 一个既是static又是final的域只能占据一段不能改变的存储空间。
		- 对于基本类型，它就是常量，一般使用大写表示，并使用下划线分隔各个单词（这种编写风格用于恒定不变的常量 eg: MAX_DOUBLE)。
- 空白final
    - java中允许空白final，但是final在使用前必须保证其已经初始化（不能编译器会报错）
    - **使用方法**：在类声明变量时声明未初始化的属性。在构造函数中将其初始化。
- final参数，相当于规定在方法中无法更改引用所指向的对象。这一特性主要**用来向匿名内部类传递数据**。
- final方法，将方法锁定，任何继承类都无法修改它的含义，即无法覆盖。
- final类，不允许有继承类。
